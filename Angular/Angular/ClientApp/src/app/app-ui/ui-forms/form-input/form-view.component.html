
<div (input)="onInput($event)" style="max-width: 480px;">

  <h4>{{title}}</h4>

  <div style="display: flex; flex-direction: row; flex-wrap: nowrap; width: 100%;">
    <button mat-raised-button [matMenuTriggerFor]="menu" aria-label="Example icon-button with a menu"
            style="margin-left: auto; justify-self: flex-end;">
      <mat-icon>more_vert</mat-icon>
    </button>
  </div>
  <mat-menu #sizes="matMenu">
    <button mat-menu-item (click)="size='large'">большой</button>
    <button mat-menu-item (click)="size='norm'">средний</button>
    <button mat-menu-item (click)="size='small'">маленький</button>
  </mat-menu>
  <mat-menu #menu="matMenu">
    <button mat-menu-item [matMenuTriggerFor]="sizes">
      <span>размер</span>
    </button>
    <button mat-menu-item (click)="view=1">
      <span>с иконками</span>
    </button>
    <button mat-menu-item (click)="view=2">
      <span>горизонтальное</span>
    </button>
    <button mat-menu-item (click)="view=3">
      <span>вертикальное</span>
    </button>
  </mat-menu>

  <div *ngFor="let field of fields" >
    <div *ngIf="field.mapped">
      <form-field
        *ngIf="!field.isControl && field"
        [view]="view"
        [size]="size"
        [class]="field.class"
        [type]="field.type"
        [name]="field.name"
        [value]="field.value"
        [label]="field.label"
        [state]="field.state"
        [help]="field.help"

        [required]="field.required"
        [errors]="field.errors"
        [transform]="field.transform"
        [validators]="field.validators"
      >
      </form-field>
      <form-control *ngIf="field.isControl"
        [control]="field['control']"
        [view]="view"
        [size]="size"
        [class]="field.class"
        [type]="field.type"
        [name]="field.name"
        [value]="field.value"
        [label]="field.label"
        [state]="field.state"
        [help]="field.help"

        [required]="field.required"
        [errors]="field.errors"
        [transform]="field.transform"
        [validators]="field.validators">

      </form-control>
    </div>
  </div>
  <div class="form-group row">
    <div class="col-sm-10">
      <ng-content></ng-content>
    </div>
  </div>
</div>
